# 完成前验证

## 何时激活

此技能在以下情况下自动激活：

- 即将宣布问题已解决
- 即将提交代码
- 即将合并分支
- 准备交付工作成果

## 目标

此技能的目标是确保工作真正完成，而不是匆忙宣布完成。

在宣布问题已解决之前，你需要：

1. **验证修复：** 确保修复真正解决了问题
2. **验证测试：** 确保所有相关测试通过
3. **验证代码质量：** 确保代码符合标准
4. **验证没有回归：** 确保没有引入新问题
5. **验证文档：** 确保文档已更新

## 步骤

### 1. 验证修复

确保修复真正解决了问题：

1. **运行相关测试：** 运行所有相关测试以验证修复
2. **手动测试：** 手动测试相关功能
3. **检查边界情况：** 测试边界情况和异常情况
4. **检查错误处理：** 测试错误处理是否正确

### 2. 验证测试

确保测试覆盖了修复：

1. **检查测试覆盖率：** 确保新代码有测试覆盖
2. **运行所有测试：** 运行整个测试套件以确保没有回归
3. **检查测试描述：** 确保测试描述准确
4. **检查测试质量：** 确保测试质量符合标准

### 3. 验证代码质量

确保代码符合质量标准：

1. **代码审查：** 自我审查代码以查找问题
2. **运行静态分析：** 运行 linter 和静态分析工具
3. **检查类型注释：** 如果使用类型检查，确保类型注释正确
4. **检查文档：** 确保代码有适当的文档

### 4. 验证没有回归

确保修复没有引入新问题：

1. **运行完整测试套件：** 运行所有测试以确保没有回归
2. **检查相关功能：** 检查相关功能是否仍然工作
3. **检查性能：** 确保性能没有下降
4. **检查安全：** 确保没有引入安全漏洞

### 5. 验证文档

确保文档已更新：

1. **更新README：** 如果需要，更新README文件
2. **更新API文档：** 如果需要，更新API文档
3. **更新注释：** 如果需要，更新代码注释
4. **更新变更日志：** 如果需要，更新变更日志

## 验证检查清单

在宣布完成之前，完成以下检查清单：

- [ ] 相关测试全部通过
- [ ] 手动测试验证修复有效
- [ ] 边界情况已测试
- [ ] 错误处理已测试
- [ ] 新代码有测试覆盖
- [ ] 完整测试套件通过
- [ ] Linter 通过
- [ ] 类型检查通过（如果适用）
- [ ] 代码已被审查
- [ ] 相关功能仍然工作
- [ ] 性能没有下降
- [ ] 没有引入安全漏洞
- [ ] 文档已更新
- [ ] 提交消息准确
- [ ] 分支已清理

## 常见错误

### 只运行相关测试

不要只运行相关测试。运行完整测试套件以确保没有回归。

### 只进行表面测试

不要只进行表面测试。测试边界情况和异常情况。

### 跳过代码审查

不要跳过代码审查。自我审查代码以查找问题。

### 忽略文档

不要忽略文档。确保文档已更新。

### 匆忙宣布完成

不要匆忙宣布完成。花时间验证一切正常。

## 示例

### 不好

> **问题：** 测试失败
> 
> **不好方法：**
> - 修复代码
> - 运行相关测试
> - 测试通过
> - 立即宣布完成

### 好

> **问题：** 测试失败
> 
> **好方法：**
> 
> **验证修复：**
> - 运行相关测试：全部通过
> - 手动测试：正常工作
> - 测试边界情况：正常工作
> - 测试错误处理：正确处理错误
> 
> **验证测试：**
> - 新代码有测试覆盖
> - 运行完整测试套件：全部通过
> 
> **验证代码质量：**
> - 运行 linter：通过
> - 运行类型检查：通过
> - 自我审查代码：没有问题
> 
> **验证没有回归：**
> - 相关功能仍然工作
> - 性能没有下降
> - 没有引入安全漏洞
> 
> **验证文档：**
> - 代码注释已更新
> - 提交消息准确
> 
> **宣布完成**

## 验证后操作

在完成验证后：

1. **记录验证结果：** 记录验证结果以便于追溯
2. **更新问题状态：** 如果适用，更新问题跟踪系统
3. **通知相关人员：** 如果适用，通知相关人员
4. **清理工作区：** 清理工作区以准备下一个任务
